(this.webpackJsonpmath=this.webpackJsonpmath||[]).push([[0],{231:function(module,__webpack_exports__,__webpack_require__){"use strict";var C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(19),C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4),C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__),C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(12),C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5),C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(10),C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(42),C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(14),C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(15),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(65),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__),_index_css__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(279),_index_css__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_index_css__WEBPACK_IMPORTED_MODULE_9__),react__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(109),react__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_10__),_tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(101),App=function(_Component){Object(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__.a)(App,_Component);var _super=Object(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_7__.a)(App);function App(_){var e;return Object(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.a)(this,App),(e=_super.call(this,_)).handleEvent=function(_){"mousedown"===_.type?e.setState({drawing:!0}):e.setState({drawing:!1})},e.state={lastPosition:null,drawing:!1,prediction:null},e.canvasRef=react__WEBPACK_IMPORTED_MODULE_10___default.a.createRef(),e.clear=e.clear.bind(Object(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__.a)(e)),e.predict=e.predict.bind(Object(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__.a)(e)),e.moving=e.moving.bind(Object(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__.a)(e)),e.split=e.split.bind(Object(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__.a)(e)),e.rescaled=e.rescaled.bind(Object(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__.a)(e)),e}return Object(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.a)(App,[{key:"clear",value:function(){var _=this.canvasRef.current,e=_.getContext("2d");e.clearRect(0,0,_.width,_.height),e.fillStyle="#FFFF",e.fillRect(0,0,_.width,_.height)}},{key:"split",value:function(){var _=Object(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function _(e){var t,a,r,s,n,o,l,c;return C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return t=this.canvasRef.current,a=t.getContext("2d"),r=document.createElement("canvas"),s=r.getContext("2d"),_.next=6,t.width;case 6:_.t0=_.sent,_.t1=e,r.width=_.t0/_.t1,r.height=400,n=[],o=0;case 12:if(!(o<e)){_.next=23;break}return l=new Image(600/e,400),_.next=16,a.getImageData(o*t.width/e,0,600/e,400);case 16:c=_.sent,s.putImageData(c,0,0),l.src=r.toDataURL(),n.push(l);case 20:o++,_.next=12;break;case 23:return console.log(n),_.abrupt("return",n);case 25:case"end":return _.stop()}}),_,this)})));return function(e){return _.apply(this,arguments)}}()},{key:"rescaled",value:function(){var _=Object(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function _(e){var t,a,r,s,n;return C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:t=[],a=document.createElement("canvas"),r=a.getContext("2d"),a.height=32,a.width=32,s=0;case 6:if(!(s<e.length)){_.next=19;break}return n=new Image(32,32),_.t0=r,_.next=11,e[s];case 11:_.t1=_.sent,_.t0.drawImage.call(_.t0,_.t1,0,0,32,32),n.src=a.toDataURL(),r.clearRect(0,0,32,32),t.push(n);case 16:s++,_.next=6;break;case 19:return console.log(t),_.abrupt("return",t);case 21:case"end":return _.stop()}}),_)})));return function(e){return _.apply(this,arguments)}}()},{key:"predict",value:function(){var _=Object(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark((function _(){var e,t,a,r,s,n,o,l,c,i,u,p,d,m,b,E,h,O,M,D,P,C,U,f,j,x,I,A,R,T,g,B,L,W,K,k,w,v,y;return C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,_tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_11__.b("https://storage.googleapis.com/mathsolvermodel/model.json");case 2:e=_.sent,t=4,a=0,r=0,s=0,n=0,o=.7,l=[],c=[],i=null,u=null,p=[],d=[],m=1;case 16:if(!(m<t+1)){_.next=53;break}return _.next=19,this.split(m);case 19:return l=_.sent,_.next=22,this.rescaled(l);case 22:c=_.sent,console.log(c),console.log("above you"),b=0;case 26:if(!(b<c.length)){_.next=49;break}i=_tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_11__.a.fromPixels(c[b]).mean(2).toFloat().expandDims(0).expandDims(-1),u=e.predict(i),p=u.dataSync(),E=0;case 31:if(!(E<p.length)){_.next=46;break}_.t0=m,_.next=1===_.t0?35:2===_.t0?37:3===_.t0?39:4===_.t0?41:43;break;case 35:return p[E]>o&&(a++,console.log("counter_1",a)),_.abrupt("break",43);case 37:return p[E]>o&&(r++,console.log(r)),_.abrupt("break",43);case 39:return p[E]>o&&(s++,console.log(s)),_.abrupt("break",43);case 41:return p[E]>o&&(n++,console.log(n)),_.abrupt("break",43);case 43:E++,_.next=31;break;case 46:b++,_.next=26;break;case 49:console.log("counter pls",d);case 50:m++,_.next=16;break;case 53:d.push(parseInt(a)),d.push(parseInt(r)),d.push(parseInt(s)),d.push(parseInt(n)),h=d.indexOf(Math.max.apply(Math,d)),O=["0","1","2","3","4","5","6","7","8","9","-","+","*","(",")","y","="],M=[],D=[],console.log("max Counter index",h),_.t1=h,_.next=0===_.t1?65:1===_.t1?74:2===_.t1?83:3===_.t1?92:100;break;case 65:return _.next=67,this.split(h);case 67:return P=_.sent,_.next=70,this.rescaled(P);case 70:for(C=_.sent,U=0;U<C.length;U++){for(f=_tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_11__.a.fromPixels(C[U]).mean(2).toFloat().expandDims(0).expandDims(-1),j=e.predict(f),M=j.dataSync(),x=0,I=0,A=0;A<M.length;A++)x<M[A]&&(x=M[A],I=A);x>=o&&D.push(I)}return console.log("final prediction:",O[M.indexOf(Math.max.apply(Math,Object(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(M)))],"accuracy:",Math.max.apply(Math,Object(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(M))),_.abrupt("break",100);case 74:return _.next=76,this.split(h);case 76:return R=_.sent,_.next=79,this.rescaled(R);case 79:for(T=_.sent,g=0;g<T.length;g++){for(f=_tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_11__.a.fromPixels(T[g]).mean(2).toFloat().expandDims(0).expandDims(-1),j=e.predict(f),M=j.dataSync(),x=0,I=0,A=0;A<M.length;A++)x<M[A]&&(x=M[A],I=A);x>=o&&D.push(I)}return console.log("final prediction:",O[M.indexOf(Math.max.apply(Math,Object(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(M)))],"accuracy:",Math.max.apply(Math,Object(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(M))),_.abrupt("break",100);case 83:return _.next=85,this.split(h);case 85:return B=_.sent,_.next=88,this.rescaled(B);case 88:for(L=_.sent,W=0;W<L.length;W++){for(f=_tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_11__.a.fromPixels(L[W]).mean(2).toFloat().expandDims(0).expandDims(-1),j=e.predict(f),M=j.dataSync(),x=0,I=0,A=0;A<M.length;A++)x<M[A]&&(x=M[A],I=A);x>=o&&D.push(I)}return console.log("final prediction:",O[M.indexOf(Math.max.apply(Math,Object(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(M)))],"accuracy:",Math.max.apply(Math,Object(C_Users_77jen_math_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(M))),_.abrupt("break",100);case 92:return _.next=94,this.split(h);case 94:return K=_.sent,_.next=97,this.rescaled(K);case 97:for(k=_.sent,w=0;w<k.length;w++){for(f=_tensorflow_tfjs__WEBPACK_IMPORTED_MODULE_11__.a.fromPixels(k[w]).mean(2).toFloat().expandDims(0).expandDims(-1),j=e.predict(f),M=j.dataSync(),x=0,I=0,A=0;A<M.length;A++)x<M[A]&&(x=M[A],I=A);x>=o&&D.push(I)}return _.abrupt("break",100);case 100:for(console.log(D),v="",y=0;y<D.length;y++)"="!=O[D[y]]&&(v+=O[D[y]]);this.setState({prediction:v});case 104:case"end":return _.stop()}}),_,this)})));return function(){return _.apply(this,arguments)}}()},{key:"moving",value:function(_){var e=this.canvasRef.current,t=e.getContext("2d"),a={x:_.clientX-e.getBoundingClientRect().left,y:_.clientY-e.getBoundingClientRect().top};null!==this.state.lastPosition&&this.state.drawing&&(t.lineWidth=10,t.lineCap="round",t.beginPath(),t.fillStyle="#000000",t.moveTo(this.state.lastPosition.x,this.state.lastPosition.y),t.lineTo(a.x,a.y),t.closePath(),t.stroke()),this.setState({lastPosition:a})}},{key:"render",value:function render(){var _this2=this;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("h1",{children:"My Math Solver"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("canvas",{ref:this.canvasRef,width:600,height:400,onMouseMove:function(_){return _this2.moving(_)},onMouseUp:this.handleEvent,onMouseDown:this.handleEvent,children:" "}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{className:"stuffs",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("button",{onClick:this.clear,children:"Clear"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("button",{onClick:this.predict,children:"Predict"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("img",{className:"t"})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("h2",{children:this.state.prediction}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("h2",{children:eval(this.state.prediction)})]})}}]),App}(react__WEBPACK_IMPORTED_MODULE_10__.Component);__webpack_exports__.a=App},251:function(_,e,t){"use strict";t.r(e);var a=t(65),r=(t(109),t(230)),s=t.n(r),n=t(231);s.a.render(Object(a.jsx)(n.a,{}),document.getElementById("root"))},279:function(_,e,t){},284:function(_,e){},285:function(_,e){},293:function(_,e){},296:function(_,e){},297:function(_,e){}},[[251,1,2]]]);
//# sourceMappingURL=main.a9c38f73.chunk.js.map